# Disco Coop - Кооперативная игра в Disco Elysium через Telegram

Система для совместной игры в Disco Elysium через Telegram чат с использованием Steam Deck и локальной LLM.

## Архитектура

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Telegram      │    │   Steam Deck    │    │      OBS        │
│   Group Chat    │◄──►│   + Bot System  │◄──►│   Streaming     │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                              │
                    ┌─────────┼─────────┐
                    │         │         │
            ┌───────▼───┐ ┌───▼────┐ ┌──▼──────┐
            │    LLM    │ │ Screen │ │  Game   │
            │ (Ollama)  │ │ Vision │ │Control  │
            └───────────┘ └────────┘ └─────────┘
```

## Компоненты

### 1. Telegram Bot
- Авторизация по белому списку чатов
- Обработка команд на естественном языке
- Отправка описаний происходящего в игре

### 2. LLM Agent (Ollama)
- Локальная модель для обработки команд
- Генерация игровых действий
- Анализ игрового контекста

### 3. Screen Analyzer
- Захват скриншотов игры
- Описание происходящего на экране
- Анализ UI элементов

### 4. Game Controller
- Эмуляция клавиатуры и мыши
- Выполнение игровых действий
- Управление диалогами и меню

## Установка и настройка

### Требования
- Steam Deck с SteamOS
- Python 3.11+
- Ollama
- Disco Elysium в Steam
- Telegram Bot Token

### Быстрый старт

1. Клонируйте репозиторий:
```bash
git clone <repo-url>
cd disco_coop
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Настройте конфигурацию:
```bash
cp config/config.example.yaml config/config.yaml
# Отредактируйте config.yaml с вашими настройками
```

4. Установите Ollama и модель:
```bash
curl -fsSL https://ollama.ai/install.sh | sh
ollama pull llama3.1:8b
ollama pull llava:7b  # для анализа изображений
```

5. Запустите бота:
```bash
python main.py
```

## Конфигурация

Все настройки находятся в `config/config.yaml`:
- Telegram bot token
- Белый список чатов
- Настройки LLM
- Параметры игры

## Команды бота

- `/describe` - Описать что происходит на экране
- `/help` - Показать помощь
- Любой текст - Интерпретируется как игровая команда

## Безопасность

- Бот работает только в чатах из белого списка
- Все команды логируются
- Возможность экстренной остановки

## Разработка

### Структура проекта
```
disco_coop/
├── main.py              # Точка входа
├── config/              # Конфигурационные файлы
├── src/
│   ├── bot/            # Telegram bot
│   ├── llm/            # LLM интеграция
│   ├── vision/         # Анализ экрана
│   ├── game/           # Управление игрой
│   └── utils/          # Утилиты
├── tests/              # Тесты
└── docs/               # Документация
```

## Лицензия

MIT License